{"remainingRequest":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sys09/Documentos/rafael/vuejs/app-visitantes/src/components/AppListaVisitantes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/src/components/AppListaVisitantes.vue","mtime":1555075999997},{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sys09/Documentos/rafael/vuejs/app-visitantes/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport config from \"./../config/config\";\n\nexport default {\n  data() {\n    return {\n      titulo: \"Cadastro\",\n      visitante: {\n        nome: \"\",\n        contato: \"\",\n        cpf: \"\",\n        hora: \"\"\n      },\n      visitantes: [],\n      erros: [],\n      selecionado: \"\",\n      exibir: false,\n      mensagem: \"\",\n      classCSS: \"\"\n    };\n  },\n  created() {\n    axios.get(`${config.apiURL}/visitantes`).then(response => {\n      this.visitantes = response.data;\n    });\n  },\n  computed: {\n    listaOrdenada() {\n      return this.visitantes.sort((v1, v2) => {\n        return v1.nome < v2.nome ? -1 : v1.nome > v2.nome ? 1 : 0;\n      });\n    }\n  },\n  methods: {\n    resetar() {\n      this.titulo = \"Cadastro\";\n      this.visitante = {\n            nome: \"\",\n            contato: \"\",\n            cpf: \"\",\n            hora: \"\"\n      };\n      this.erros = [];\n    },\n    validarLetras(texto) {\n      let regex = /^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$/;\n      return regex.test(texto);\n    },\n    buscarCPF(umVetor, item) {\n      let prim = 0;\n      let ult = umVetor.length - 1;\n      let achou = false;\n      while (prim <= ult && !achou) {\n        let meioLista = Math.ceil((prim + ult) / 2);\n        if (umVetor[meioLista] == item) {\n          achou = true;\n        } else {\n          if (item < umVetor[meioLista]) {\n            ult = meioLista - 1;\n          } else {\n            prim = meioLista + 1;\n          }\n        }\n      }\n\n      return achou;\n    },\n    ordenarCPF(array) {\n      return array.sort((v1, v2) => {\n        return v1 < v2 ? -1 : v1 > v2 ? 1 : 0;\n      });\n    },\n    validar() {\n      this.erros = [];\n\n      if (!this.visitante.nome) {\n        this.erros.push(\"O nome é obrigatório.\");\n      }\n      if (\n        !this.validarLetras(this.visitante.nome) &&\n        this.visitante.nome.length > 0\n      ) {\n        this.erros.push(\"É aceitável apenas letras no campo nome.\");\n      }\n\n      if (this.visitante.contato.length <15) {\n        this.erros.push(\"Contato incompleto.\");\n      }\n\n      if (this.visitante.cpf.length <14) {\n        this.erros.push(\"CPF incompleto.\");\n      }\n\n      let arrayCPF = [];\n\n      this.visitantes.forEach(element => {\n        arrayCPF.push(element.cpf);\n      });\n\n      if (this.titulo == \"Cadastro\" && this.buscarCPF(this.ordenarCPF(arrayCPF), this.visitante.cpf)\n      ) {\n        this.erros.push(\"CPF inválido.\");\n      }\n\n      if (!this.visitante.hora) {\n        this.erros.push(\"O horário de entrada é obrigatório.\");\n      }\n\n      return (this.erros.length > 0) ? false : true;\n    },\n    exibirMensagem() {\n      this.exibir = true;\n      setTimeout(() => {\n        this.exibir = false;\n      }, 3000);\n    },\n    listar() {\n      axios.get(`${config.apiURL}/visitantes`).then(response => {\n        this.visitantes = response.data;\n      });\n    },\n    salvar(event) {\n      if (this.validar()) {\n        if (this.titulo == \"Cadastro\") {\n          axios\n            .post(`${config.apiURL}/visitantes/`, this.visitante)\n            .then(response => {\n              this.listar();\n              if (response.status == 201) {\n                this.classCSS = \"alert-success\";\n                this.mensagem = \"Cadastrado com sucesso!\";\n              } else {\n                this.classCSS = \"alert-danger\";\n                this.mensagem = \"Erro ao cadastrar!\";\n              }\n              this.exibirMensagem();\n            });\n        } else {\n          axios\n            .put(\n              `${config.apiURL}/visitantes/${this.visitante.id}/`,\n              this.visitante\n            )\n            .then(response => {\n              this.listar();\n              if (response.status == 200) {\n                this.classCSS = \"alert-success\";\n                this.mensagem = \"Alterado com sucesso!\";\n              } else {\n                this.classCSS = \"alert-danger\";\n                this.mensagem = \"Erro ao alterar!\";\n              }\n              this.exibirMensagem();\n            });\n        }\n\n        this.resetar();\n      }\n    },\n    editar(id) {\n      this.resetar();\n      this.titulo = \"Editar\";\n      this.visitante.nome = this.visitantes[id].nome;\n      this.visitante.contato = this.visitantes[id].contato;\n      this.visitante.cpf = this.visitantes[id].cpf;\n      this.visitante.hora = this.visitantes[id].hora;\n      this.visitante.id = this.visitantes[id].id;\n      this.selecionado = id;\n    },\n    remover(id) {\n      \n      this.visitante = {\n            nome: \"\",\n            contato: \"\",\n            cpf: \"\",\n            hora: \"\"\n      };\n    \n      const confirmar = window.confirm(\n        `Desejar remover o visitante \"${this.visitantes[id].nome}\"?`\n      );\n\n      if (confirmar) {\n        axios\n          .delete(`${config.apiURL}/visitantes/${this.visitantes[id].id}`)\n          .then(response => {\n            this.titulo = \"Cadastro\";\n            this.erros = [];\n            this.listar();\n            if (response.status == 200) {\n              this.classCSS = \"alert-success\";\n              this.mensagem = \"Deletado com sucesso!\";\n            } else {\n              this.classCSS = \"alert-danger\";\n              this.mensagem = \"Erro ao deletar!\";\n            }\n            this.exibirMensagem();\n          });\n      }\n    }\n  }\n};\n",{"version":3,"sources":["AppListaVisitantes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppListaVisitantes.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"divVisitantes\" class=\"row\">\n    <div class=\"col-md-4\">\n      <div class=\"divColVisitantes\" id=\"divCadastro\">\n        <h2>{{ titulo }}</h2>\n        <form>\n          <div class=\"row\">\n            <div class=\"form-group col-md-7\">\n              <label for=\"nome\">Nome:</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"nome\"\n                v-model=\"visitante.nome\"\n                v-mask=\"''\"\n              >\n            </div>\n            <div class=\"form-group col-md-5\">\n              <label for=\"contato\">Contato:</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"contato\"\n                v-model=\"visitante.contato\"\n                v-mask=\"'(##) #####-####'\"\n              >\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"form-group col-md-8\">\n              <label for=\"cpf\">CPF:</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"cpf\"\n                v-model=\"visitante.cpf\"\n                v-mask=\"'###.###.###-##'\"\n                :disabled=\"titulo == 'Editar'\"\n              >\n            </div>\n            <div class=\"form-group col-md-4\">\n              <label for=\"entrada\">Entrada:</label>\n              <input\n                type=\"time\"\n                step=\"2\"\n                class=\"form-control\"\n                id=\"entrada\"\n                v-model=\"visitante.hora\"\n              >\n            </div>\n          </div>\n          <button class=\"btn btn-info\" type=\"reset\" @click=\"resetar\" style=\"margin-right: 0.5%\">\n            <i class=\"glyphicon glyphicon-refresh\"></i> Limpar\n          </button>\n          <button class=\"btn btn-success\" type=\"button\" @click=\"salvar\">\n            <i class=\"glyphicon glyphicon-floppy-disk\"></i> Salvar\n          </button>\n        </form>\n      </div>\n      <div v-if=\"erros.length\" class=\"alert alert-danger\">\n        <b>Por favor, corrija o(s) seguinte(s) erro(s):</b>\n        <ul>\n          <li v-for=\"(erro,indice) in erros\" :key=\"indice\">{{ erro }}</li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"col-md-8\">\n      <div class=\"divColVisitantes\" id=\"divTabelaVisitantes\">\n        <div class=\"text-center\">\n          <h2>Visitantes</h2>\n        </div>\n        <div v-if=\"exibir\" class=\"alert\" :class=\"classCSS\">\n          <div class=\"row text-center\">{{mensagem}}</div>\n        </div>\n        <div v-if=\"visitantes.length\">\n          <table class=\"table table-hover\">\n            <thead>\n              <tr>\n                <th>Nome</th>\n                <th>CPF</th>\n                <th>Contato</th>\n                <td>Entrada</td>\n                <td></td>\n                <td></td>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(valor,indice) in listaOrdenada\" :key=\"indice\">\n                <td>{{ valor.nome }}</td>\n                <td>{{ valor.cpf }}</td>\n                <td>{{ valor.contato }}</td>\n                <td>{{ valor.hora }}</td>\n                <td>\n                  <button class=\"btn btn-primary\" @click=\"editar(indice)\">\n                    <i class=\"glyphicon glyphicon-pencil\"></i>\n                  </button>\n                </td>\n                <td>\n                  <button class=\"btn btn-danger\" @click=\"remover(indice)\">\n                    <i class=\"glyphicon glyphicon-trash\"></i>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div v-else class=\"alert alert-warning\">\n          <div class=\"row text-center\">Nenhum resultado encontrado</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport config from \"./../config/config\";\n\nexport default {\n  data() {\n    return {\n      titulo: \"Cadastro\",\n      visitante: {\n        nome: \"\",\n        contato: \"\",\n        cpf: \"\",\n        hora: \"\"\n      },\n      visitantes: [],\n      erros: [],\n      selecionado: \"\",\n      exibir: false,\n      mensagem: \"\",\n      classCSS: \"\"\n    };\n  },\n  created() {\n    axios.get(`${config.apiURL}/visitantes`).then(response => {\n      this.visitantes = response.data;\n    });\n  },\n  computed: {\n    listaOrdenada() {\n      return this.visitantes.sort((v1, v2) => {\n        return v1.nome < v2.nome ? -1 : v1.nome > v2.nome ? 1 : 0;\n      });\n    }\n  },\n  methods: {\n    resetar() {\n      this.titulo = \"Cadastro\";\n      this.visitante = {\n            nome: \"\",\n            contato: \"\",\n            cpf: \"\",\n            hora: \"\"\n      };\n      this.erros = [];\n    },\n    validarLetras(texto) {\n      let regex = /^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$/;\n      return regex.test(texto);\n    },\n    buscarCPF(umVetor, item) {\n      let prim = 0;\n      let ult = umVetor.length - 1;\n      let achou = false;\n      while (prim <= ult && !achou) {\n        let meioLista = Math.ceil((prim + ult) / 2);\n        if (umVetor[meioLista] == item) {\n          achou = true;\n        } else {\n          if (item < umVetor[meioLista]) {\n            ult = meioLista - 1;\n          } else {\n            prim = meioLista + 1;\n          }\n        }\n      }\n\n      return achou;\n    },\n    ordenarCPF(array) {\n      return array.sort((v1, v2) => {\n        return v1 < v2 ? -1 : v1 > v2 ? 1 : 0;\n      });\n    },\n    validar() {\n      this.erros = [];\n\n      if (!this.visitante.nome) {\n        this.erros.push(\"O nome é obrigatório.\");\n      }\n      if (\n        !this.validarLetras(this.visitante.nome) &&\n        this.visitante.nome.length > 0\n      ) {\n        this.erros.push(\"É aceitável apenas letras no campo nome.\");\n      }\n\n      if (this.visitante.contato.length <15) {\n        this.erros.push(\"Contato incompleto.\");\n      }\n\n      if (this.visitante.cpf.length <14) {\n        this.erros.push(\"CPF incompleto.\");\n      }\n\n      let arrayCPF = [];\n\n      this.visitantes.forEach(element => {\n        arrayCPF.push(element.cpf);\n      });\n\n      if (this.titulo == \"Cadastro\" && this.buscarCPF(this.ordenarCPF(arrayCPF), this.visitante.cpf)\n      ) {\n        this.erros.push(\"CPF inválido.\");\n      }\n\n      if (!this.visitante.hora) {\n        this.erros.push(\"O horário de entrada é obrigatório.\");\n      }\n\n      return (this.erros.length > 0) ? false : true;\n    },\n    exibirMensagem() {\n      this.exibir = true;\n      setTimeout(() => {\n        this.exibir = false;\n      }, 3000);\n    },\n    listar() {\n      axios.get(`${config.apiURL}/visitantes`).then(response => {\n        this.visitantes = response.data;\n      });\n    },\n    salvar(event) {\n      if (this.validar()) {\n        if (this.titulo == \"Cadastro\") {\n          axios\n            .post(`${config.apiURL}/visitantes/`, this.visitante)\n            .then(response => {\n              this.listar();\n              if (response.status == 201) {\n                this.classCSS = \"alert-success\";\n                this.mensagem = \"Cadastrado com sucesso!\";\n              } else {\n                this.classCSS = \"alert-danger\";\n                this.mensagem = \"Erro ao cadastrar!\";\n              }\n              this.exibirMensagem();\n            });\n        } else {\n          axios\n            .put(\n              `${config.apiURL}/visitantes/${this.visitante.id}/`,\n              this.visitante\n            )\n            .then(response => {\n              this.listar();\n              if (response.status == 200) {\n                this.classCSS = \"alert-success\";\n                this.mensagem = \"Alterado com sucesso!\";\n              } else {\n                this.classCSS = \"alert-danger\";\n                this.mensagem = \"Erro ao alterar!\";\n              }\n              this.exibirMensagem();\n            });\n        }\n\n        this.resetar();\n      }\n    },\n    editar(id) {\n      this.resetar();\n      this.titulo = \"Editar\";\n      this.visitante.nome = this.visitantes[id].nome;\n      this.visitante.contato = this.visitantes[id].contato;\n      this.visitante.cpf = this.visitantes[id].cpf;\n      this.visitante.hora = this.visitantes[id].hora;\n      this.visitante.id = this.visitantes[id].id;\n      this.selecionado = id;\n    },\n    remover(id) {\n      \n      this.visitante = {\n            nome: \"\",\n            contato: \"\",\n            cpf: \"\",\n            hora: \"\"\n      };\n    \n      const confirmar = window.confirm(\n        `Desejar remover o visitante \"${this.visitantes[id].nome}\"?`\n      );\n\n      if (confirmar) {\n        axios\n          .delete(`${config.apiURL}/visitantes/${this.visitantes[id].id}`)\n          .then(response => {\n            this.titulo = \"Cadastro\";\n            this.erros = [];\n            this.listar();\n            if (response.status == 200) {\n              this.classCSS = \"alert-success\";\n              this.mensagem = \"Deletado com sucesso!\";\n            } else {\n              this.classCSS = \"alert-danger\";\n              this.mensagem = \"Erro ao deletar!\";\n            }\n            this.exibirMensagem();\n          });\n      }\n    }\n  }\n};\n</script>\n\n<style>\n#divVisitantes {\n  margin: 0% 1% 1%;\n  background-color: #ffffff;\n  padding: 1%;\n  border-radius: 5px;\n}\n\n.divColVisitantes {\n  margin: 0.5%;\n}\n\n#divCadastro {\n  border: 1px solid gray;\n  padding: 2%;\n  border-radius: 5px;\n}\n\n#divTabelaVisitantes {\n  border: 1px solid gray;\n  padding: 1%;\n  border-radius: 5px;\n}\n</style>\n"]}]}